<!DOCTYPE html>
<html>
    <head>
        <title>jQuery Mobile Application</title>
        <script src="http://code.jquery.com/jquery-1.6.1.min.js"></script>
        <script type="text/javascript">
            function timeSpan(fromDate, toDate, format){
        	if(format==null) format="milliseconds";	
			var formatsMS = {
				milliseconds:1,
				seconds:1000,
				minutes:1000*60,
				hours:1000*60*60,
				days:1000*60*60*24,
				weeks:1000*60*60*24*7,
				months:function(m){
					var ms = this.days,
					daysPer = [ 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 ];
					return ms*daysPer[m];
				},
				years:function(y){
					var ms = 1000*60*60*24*365;
					//add a day for leap years
					if( (y % 4 == 0 && y % 100 == 0) || y % 400 == 0 )
						ms += this.days;
					return ms;
				}
			},
			//get the time difference in milliseconds
			ms = toDate.getTime()-fromDate.getTime(),
			reqFormats = format.split(","),
			isYearReq = (format.indexOf("years")>-1),
			isMonthReq = (format.indexOf("months")>-1),
			result = {};
			
			if(isYearReq){ 
				result["years"]=0;
				for(var y=fromDate.getFullYear(); y <= toDate.getFullYear(); y++){	
					var yearMS = formatsMS.years(y);
					if(ms >= yearMS){
						ms -= yearMS;
						result["years"]+=1;
					}
				}
				//use "to" year for calculating decimal
				formatsMS.years = formatsMS.years(toDate.getFullYear());
			}
			if(isMonthReq){
				result["months"]=0;
				var month = fromDate.getMonth(),
					year = (result["years"]>0) ? fromDate.getFullYear() + result["years"] : fromDate.getFullYear();					
				for(month; month<=11; month++){
					var monthMS = formatsMS.months(month);
					if(month==toDate.getMonth() && year== toDate.getFullYear()) break;
					else if(ms >= monthMS){
						ms -= monthMS;
						result["months"]+=1;
					}
					if(month==12 && year < toDate.getFullYear()) {
						month=0; 
						year++;
					}
				}
				//use "to" month for decimal
				formatsMS.months = formatsMS.months(toDate.getMonth());
			}

			//handle the remaining milliseconds
			for(var f=0; f < reqFormats.length && reqFormats[0]!=""; f++){
				var res=(f<reqFormats.length-1) ? Math.floor(ms/formatsMS[reqFormats[f]]) : ms/formatsMS[reqFormats[f]];
				if(ms>0) result[reqFormats[f]] = (result[reqFormats[f]]>=0) ? result[reqFormats[f]]+=res : res;
				else result[reqFormats[f]]=0;

				ms -= res * formatsMS[reqFormats[f]];
			}
			return result;
		}
        </script>
        <script type="text/javascript">
            $(function(){
                var count = 10;
                countdown = setInterval(function(){

                    var start = new Date(); //.getTime();
                    var target = new Date("2011 Aug 31 23:59:59"); //.getTime();
                    var one_day=1000*60*60*24;                    
                    var one_hour=1000*60*60;                      
                    var one_minute=1000*60;                      
                    var one_second=1000;                


                    $("p").html(target.toString());
                    
                    $("h1").html(Math.ceil((target.getTime()-start.getTime())/(one_day)) + " day(s)");
                    $("h2").html(Math.ceil((target.getTime()-start.getTime())/(one_hour)) + " hour(s)");
                    $("h3").html(Math.ceil((target.getTime()-start.getTime())/(one_minute)) + " minutes(s)");
                    $("h4").html(Math.ceil((target.getTime()-start.getTime())/(one_second)) + " second(s)");
                }, 500);
            });

            
            


        </script>

        <style type="text/css">
             
                  
        </style>
    </head>
    <body>
        <p>date</p>
        <h1>countdown</h1>
        <h2>hours</h2>
        <h3>minutes</h3>
        <h4>seconds</h4>

<script type="text/javascript">
//######################################################################################
// Author: ricocheting.com
// Version: v2.0
// Date: 2011-03-31
// Description: displays the amount of time until the "dateFuture" entered below.

// NOTE: the month entered must be one less than current month. ie; 0=January, 11=December
// NOTE: the hour is in 24 hour format. 0=12am, 15=3pm etc
// format: dateFuture1 = new Date(year,month-1,day,hour,min,sec)
// example: dateFuture1 = new Date(2003,03,26,14,15,00) = April 26, 2003 - 2:15:00 pm

dateFuture1 = new Date(2011,7,31,23,59,59);

// TESTING: comment out the line below to print out the "dateFuture" for testing purposes
//document.write(dateFuture +"<br />");


//###################################
//nothing beyond this point
function GetCount(ddate,iid){

    dateNow = new Date();	//grab current date
	amount = ddate.getTime() - dateNow.getTime();	//calc milliseconds between dates
	delete dateNow;

	// if time is already past
	if(amount < 0){
		document.getElementById(iid).innerHTML="Now!";
	}
	// else date is still good
	else{
		weeks=0;days=0;hours=0;mins=0;secs=0;out="";

		amount = Math.floor(amount/1000);//kill the "milliseconds" so just secs

		weeks=Math.floor(amount/604800);//weeks
		amount=amount%604800;

		days=Math.floor(amount/86400);//days
		amount=amount%86400;

		hours=Math.floor(amount/3600);//hours
		amount=amount%3600;

		mins=Math.floor(amount/60);//minutes
		amount=amount%60;

		secs=Math.floor(amount);//seconds

		out += weeks +" "+((weeks==1)?"week":"weeks")+", ";
		out += days +" "+((days==1)?"day":"days")+", ";
		out += hours +" "+((hours==1)?"hour":"hours")+", ";
		out += mins +" "+((mins==1)?"min":"mins")+", ";
		out += secs +" "+((secs==1)?"sec":"secs")+", ";
		out = out.substr(0,out.length-2);
		document.getElementById(iid).innerHTML=out;

		setTimeout(function(){GetCount(ddate,iid)}, 1000);
	}
}

window.onload=function(){
	GetCount(dateFuture1, 'countbox1');
	//you can add additional countdowns here (just make sure you create dateFuture2 and countbox2 etc for each)
};
</script>
<div id="countbox1"></div>
    </body>
</html>